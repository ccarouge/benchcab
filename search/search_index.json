{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"About benchcab","text":"<p><code>benchcab</code> is an evaluation tool for the land surface model CABLE. <code>benchcab</code> is designed to perform set standard simulations with two versions of CABLE. These simulations are then analysed together in modelevaluation.org to assess the scientific strengths and gaps in the two CABLE versions.</p> <p>It is developed and maintained by the CABLE's user community and the ACCESS-NRI.</p>"},{"location":"user_guide/","title":"User Guide","text":"<p>In this guide, we will describe:</p> <ul> <li>how to install the package</li> <li>how to use the software, including any requirements</li> <li>the different modes supported by the software</li> </ul> <p><code>benchcab</code> has been designed to work on NCI machine exclusively. It might be extended later on to other systems.</p>"},{"location":"user_guide/#pre-requisites","title":"Pre-requisites","text":"<p>To use <code>benchcab</code>, you need to join the following projects at NCI:</p> <ul> <li>ks32</li> <li>hh5</li> </ul>"},{"location":"user_guide/#installation","title":"Installation","text":"<p>The package is already installed for you in the Conda environments under the hh5 project. You simply need to load the module for the conda environment:</p> <pre><code>   module use /g/data/hh5/public/modules\n   module load conda\n</code></pre> <p>You need to load the module on each new session at NCI on login or compute nodes.</p> <p>Save the module location</p> <p>You should not put any <code>module load</code> or <code>module add</code> commands in your <code>$HOME/.bashrc</code> file. But you can safely store the <code>module use /g/data/hh5/public/modules</code> command in your <code>$HOME/.bashrc</code> file. This means you won't have to type this line again in other sessions you open on Gadi.</p>"},{"location":"user_guide/#usage","title":"Usage","text":"<p><code>benchcab</code> will run the exact same configurations on two CABLE branches specified by the user, e.g. a user branch (with personal changes) against the head of the trunk. The results should be attached with all new tickets.</p> <p>The code will: (i) check out and (ii) build the code branches. Then it will run each executable across N standard science configurations for a given number of sites. It is possible to produce some plots locally from the output produced. But the modelevaluation website can be used for further benchmarking and evaluation.</p>"},{"location":"user_guide/#create-a-work-directory","title":"Create a work directory","text":""},{"location":"user_guide/#choose-a-location","title":"Choose a location","text":"<p>You can run the benchmark from any directory you want under /scratch or /g/data. /scratch is preferred as the data in the run directory does not need to be preserved for a long time. The code will create sub-directories as needed. Please ensure you have enough space to store the CABLE outputs in your directory, at least temporary, until you upload them to modelevaluation.org. You will need about 70GB for the outputs of a full evaluation case.</p> <p>The HOME directory is unsuitable</p> <p>Do not use your $HOME directory to contain the work directory as it does not have enough space to contain the outputs.</p>"},{"location":"user_guide/#setup-the-work-directory","title":"Setup the work directory","text":"<p>The simplest is to clone an existing work directory with git and then adapt it to your case. Such an example work directory is available on GitHub under the CABLE-LSM organisation.</p> <p>Once the work directory is cloned, you will need to adapt the <code>config.yaml</code> file to your case. Refer to the description of the options for this file.</p>"},{"location":"user_guide/#run-the-simulations","title":"Run the simulations","text":"<p>Once you have a configuration file, you need to load the module for <code>benchcab</code>:</p> <pre><code>module use /g/data/hh5/public/modules\nmodule load conda/analysis3-unstable\n</code></pre> <p>Then simply launch <code>benchcab</code> from within your work directory:</p> <pre><code>benchcab\n</code></pre> <p>For help on the available options for <code>benchcab</code>:</p> <pre><code>benchcab -h\n</code></pre>"},{"location":"user_guide/#check-the-status","title":"Check the status","text":"<p>The benchmarking will follow the steps:</p> <ol> <li>Checkout both branches. The codes will be stored under <code>src/</code> directory in your work directory. The sub-directories are created automatically.</li> <li>Compile the source code from both branches</li> <li>Setup and launch a PBS job to run the simulations in parallel. The simulation inputs and outputs are stored under <code>runs/site/</code>.</li> </ol> <p>When <code>benchcab</code> launches the PBS job, it will print out the job ID to the terminal. You can check the status of the job with <code>qstat</code>.</p>"},{"location":"user_guide/#analyse-the-output-with-modelevaluationorg","title":"Analyse the output with modelevaluation.org","text":"<p>Once the benchmarking has finished running all the simulations, you need to upload the output files to modelevaluation.org:</p> <ol> <li>Open and log into modelevaluation.org</li> <li>Navigate to the <code>NRI Land testing</code> workspace</li> <li>Create a model profile for the two model branches you are using</li> <li>Create a model output and upload the outputs in <code>runs/sites/outputs/</code> under your work directory</li> <li>Launch the analysis</li> </ol>"},{"location":"user_guide/#contacts","title":"Contacts","text":"<p>Please enter your questions as issues on the benchcab repository.</p> <p>Alternatively, you can also post discussions or questions on the ACCESS-Hive forum.</p>"},{"location":"user_guide/config_options/","title":"config.yaml options","text":""},{"location":"user_guide/config_options/#technical-details","title":"Technical details","text":"<code>project</code> <p>NCI project ID to charge the simulations to.</p> <code>user</code> <p>NCI user ID to find the CABLE branch on SVN and run the simulations.</p> <code>modules</code> <p>NCI modules to use for compiling CABLE</p>"},{"location":"user_guide/config_options/#simulations-details","title":"Simulations details","text":"<code>realisations</code> <p>Detail of the branches to use for the evaluation. It contains entries for each of the two branches (\"0\" and \"1\"). For each branch, you need to give:</p> <ul> <li><code>name</code>: the name of the branch on SVN, relative to:<ul> <li>https://trac.nci.org.au/svn/cable for the trunk</li> <li>https://trac.nci.org.au/svn/cable/branches/Share for a shared branch</li> <li>https://trac.nci.org.au/svn/cable/branches/Users/{user_id} for a user branch</li> </ul> </li> <li><code>revision</code>: Default=-1. Revision version to use for the branch. Specify \"-1\" to use the HEAD of the branch.</li> <li><code>trunk</code>: True if this branch is the trunk for CABLE. Else set to False.</li> <li><code>share_branch</code>: True if this branch is under <code>branches/Share</code> in the CABLE svn repository, else set to False.</li> </ul> <code>experiment</code> <p>Type of experiment to run. To choose from:</p> <ul> <li>forty-two-site-test: to run simulations using 42 FLUXNET sites</li> <li>five-site-test: to run simulations using 5 FLUXNET sites</li> <li>AU-Tum: to run simulations at the Tumbarumba (AU) site</li> <li>AU-How: to run simulations at the Howard Spring (AU) site</li> <li>FI-Hyy: to run simulations at the Hyytiala (FI) site</li> <li>US-Var: to run simulations at the Vaira Ranch-Ione (US) site</li> <li>US-Whs: to run simulations at the Walnut Gulch Lucky Hills Shrub (US) site</li> </ul>"}]}